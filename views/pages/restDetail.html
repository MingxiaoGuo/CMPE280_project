<!DOCTYPE html>
<html>
<head>
	<% include ../partials/head %>
	<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"> -->
	<style>
	html,
	body {
		font-family: Arial, sans-serif;
		height: 100%;
		margin: 0;
		padding: 0;
	}
	#map {
		height: 200px;
		width: 300px;
	}
	/*.row {
	height: 300px;
	margin-top: 100px;
	}*/

	</style>
</head>
<body>
	<% include ../partials/nav %>
	<div class="container">
		<div class="row">
			<div class="col-xs-6">
				<div  id="map" class=""></div>
				<h2>Our Location</h2>
				<div id="address"></div>
				<phone>
					<abbr>P:</abbr> <%= restaurantInfo.phone %>
				</phone>
			</div>

			<div class="col-xs-6 pictures">
				add more pictures
			</div>



		</div>

		<div class="row comments">
			<h2>Comments</h2>
		</div>

		<div class="data">
			<!-- <h2>Comments</h2> -->
			<!-- <%= restaurantAddress %> -->
		</div>
	</div>

	<script>
	// var address = "<% restaurantAddress %>";
	// $(".data").append( "<p>address</p>" );
	// var restaurantAddress = JSON.stringify(restaurantAddress);
	</script>

	<script>
	var map;
	var geocoder;
	function initMap() {
		// Constructor creates a new map - only center and zoom are required.
		geocoder = new google.maps.Geocoder();
		// google.maps.LatLng 物件
		// var coord = new google.maps.LatLng({lat: 37.335187, lng: -121.881072});
		var coord = new google.maps.LatLng(address);

		map = new google.maps.Map(document.getElementById('map'), {
			// center: {lat: 37.335187, lng: -121.881072},
			center: {lat: 37.335187, lng: -121.881072},
			// Map Coordinates of Selected Location
			// Latitude:N 24° 57' 53.5248"
			// Longitude:E 121° 32' 52.3284"
			// Latitude:24° 57.89208'
			// Longitude:121° 32.87214'
			// Latitude:24.964868°
			// Longitude:121.547869°
			zoom: 17
		});

		// 傳入 latLng 資訊至 geocoder.geocode
		// geocoder.geocode({'latLng': coord }, function(results, status) {
		geocoder.geocode({ 'address': address}, function(results, status) {
			if (status == 'OK') {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });
	}


	</script>

	<script>
	// var address = "1 Washington Sq, San Jose, CA 95192";
	var address = "<%= restaurantAddress %>";
	// var address = <%- JSON.stringify(restaurantAddress) %>;
	document.getElementById("address").innerHTML = address;
	</script>

	<script async defer
	src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB9X4b-bn6IjOnnJxtyAKQlRO8dF0iV00s&v=3&callback=initMap">
	</script>


</body>
</html>
